<!DOCTYPE html>
<html>
<body>

<svg width=600 height=150>
<defs>
<rect id=example x=0 y=0 width=40 height=20  fill="none"
 style="fill-opacity:0.8" />
</defs>

<!-- No transformation: box is small at the origin -->
<g stroke="red">
<use xlink:href="#example" />
</g>

<!-- Mark the place where we expect to the box to be after scale(3) -->
<!-- That is, (90,90) at the original coord, or (30,30) in the new coord
-->
<text x=90 y=85>(2) (90,90) in original coord,</text>
<text x=115 y=105>or (30,30) in new coord</text>

<!-- new coord is 3 time bigger -->
<g transform="scale(3)" fill="yellow"> 

<!-- Display box at (30,30) in this enlarged coord -->
<g  transform="translate(30, 30)" fill="yellow" stroke="blue">
    <use xlink:href="#example" />
    </g>
</g>

<g transform="translate(300,0)">
<rect x=0 y=0 width=40 height=20  fill="none"
 style="stroke:red;fill-opacity:0.8" />
<rect x=0 y=0 width=40 height=20  fill="none"
 style="stroke:blue;fill-opacity:0.8" transform="scale(3)translate(30,30)"/>
<rect x=0 y=0 width=40 height=20  fill="none"
 style="stroke:red;fill-opacity:0.8" transform="translate(30,30)scale(3)"/>
</g>

</svg>

<p>
This example first performs a scale(3) and then a translate(30,30).


<ol>
<li> Draw the box in original coord (small thin red box at upper left
corner)
<li> Coord is enlarged 3 times by scale(3)
<li> Display box at (30,30) of the enlarged (new) coord (blue box)
<ul>
<li> (30,30) in new coord is (90,90) in old coord, where the "(2)" label
is displayed
<li> stroke is three times thicker too
</ul>
</ol>
<ul>
<li> The process of drawing is <em>outside in</em>, i.e., first scale
then translate
<li> In terms of matrix transformation, i.e., transform a point in new
coord to old coord is <em>inside out</em>, which is consistent with our
discussion in matrix transformation (i.e., left to right order of
transformation), that is:
<ul>
<li> A point (0,0), which is the upper left corner of the box, in new
coord is translated by (30,30), which is specified in inner <g>
<li> The transformed point (30,30) is further scaled up 3 times, which is
specified in outer <g>. Thus, (30,30) becomes (90,90) in the OLD coord
and the box is shown in the viewport (the old coord which we are seeing
on the screen)
</ul>
<li> Display on the right is generated by:
<ol>
<li> Blue (same as using g tag on the left): transform="scale(3)translate(30,30)"
<li> Red: transform="translate(30,30)scale(3)"
</ol>
<li> transform="op1 op2" is a special case of &lt; g transform="op1"&gt;..
&lt;g transform="op2"&gt; ...&lt;/g&gt;&lt;/g&gt; ; nesting g tags is
more flexible because you can insert other operations between two nested g
tags
<li> *** Given a sequence of transformation operations, you always
transform the coordinate systems first without considering the object to be
display; then you put the object on the final transformed coordinates
trans
</ul>

</body>
</html>
