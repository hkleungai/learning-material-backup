<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>COMP2012H Self-test Web Page</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<meta name="keywords" content="" />
<!--link rel="stylesheet" href="img/Underground.css" type="text/css" /-->
<!-- Bubble tooltips: adopted from: http://www.web-graphics.com/mtarchive/BubbleTooltips.html--><!-- For automatic tooltip: -->
<script src="bubbletooltips/bubbletooltips.js" type=text/javascript></script>
<!-- Example:  usage <a href="" title=""></a>  --><!-- For customize tooltip -->
<link media=all href="bubbletooltips/bt.css" type=text/css rel=stylesheet>
<script type="text/javascript" src="jquery/jquery.js"></script>

<!-- JQuery Calender is located here... -->
<style type="text/css">@import url(jquerycalendar/jquery-calendar.css);</style>
<script type="text/javascript" src="jquerycalendar/jquery-calendar.js"></script>

<script type="text/javascript" src="selftestmenu.js"></script>
<link rel="stylesheet" type="text/css" href="selfteststyle.css" />
<!-- highslide stuff: TESTING... -->
<script type="text/javascript" src="highslide/highslide-with-html.js"></script>
<script type="text/javascript">    
    hs.graphicsDir = 'highslide/graphics/';
    hs.outlineType = 'rounded-white';
    hs.outlineWhileAnimating = true;
</script>
<style type="text/css">@import url(highslide/myslide.css);</style>
<!-- END OF highslide stuff -->

</head>

<!-- Start of the main html body -->
<body>

<!-- wrap starts here -->
<div id="main">
<div id="wrap">
        <!-- header -->
        <div id="header">
                <span id="slogan" ></span>
                <!-- tabs -->
                <ul>
                  <li class="showall-solution"><a href="#" title="Show all solutions"><span>Show all solutions</span></a></li>
                  <li class="hideall-solution"><a href="#" title="Hide all solutions"><span>Hide all solutions</span></a></li>
                 
                </ul>
        </div>
        <!-- main block: right panel -->
        <!--div id="main"-->

          <!--  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% Test 1 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%  -->
          <div id='block1' style="display:block;	clear:left;">
            <h1>Self-test 14: <br /> Constructors & Destructors  </h1>

          <OL>

            <!-- Start of question 1 -->
            <LI>
            <div class="question-wrapper">
            <div class="question-content">
              <!-- Put the question here -->
              <p>Which of the followings is/are automatically and
	      unconditionally added to every class, if we do not write our own?</p>

              <ol type="A">

                <li>Copy Constructor.</li>
                <li>Assignment Operator.</li>
                <li>A constructor without any parameter.</li>
                <li>A and B only.</li>
                <li>All of the above.</li>

              </ol>
            </div>
        
            <div class="toggle-solution">Solution</div>
            <div class="solution-content">
              <!-- Put the solution here -->
              <b>D is correct.</b> In C++, if we do not write our own copy
            constructor and assignment operator for a class, the compiler
            automatically creates them. The default constructor will also be
            created by the compiler but only under the situation when no
            constructors of any kind are defined for a class.
            </div>              
            </div>
            <hr />
            </LI>
            <!-- End of question 1 -->

            			
			<!-- Start of question 2 -->
            <LI>
            <div class="question-wrapper">
            <div class="question-content">
              <!-- Put the question here -->
              <p>When a copy constructor may be called?</p>

              <ol type="A">

                <li>When an object of the class is returned by value.</li>

                <li>When an object of the class is passed (to a function) by value as an argument.</li>

                <li>When an object is constructed based on another object of the same class</li>

                <li>All of the above.</li>

              </ol>
            </div>
        
            <div class="toggle-solution">Solution</div>
            <div class="solution-content">
              <!-- Put the solution here -->
              <b>D is correct.</b> Conceptually a copy constructor may be called in following cases: 
				<ul>
					<li>When an object of the class is returned by value.</li>
					<li>When an object of the class is passed (to a function) by value as an argument.</li>
					<li>When an object is constructed based on another object of the same class.</li>
					<li>When compiler generates a temporary object.</li>
				</ul>
			It is, however, not guaranteed that a copy constructor will be called in all these cases, because the C++ Standard allows the compiler to optimize the copy away in certain cases, one example being the <a href="http://en.wikipedia.org/wiki/Return_value_optimization" target="_blank">return value optimization</a> (sometimes referred to as RVO).
            </div>              
            </div>
            <hr />
            </LI>
            <!-- End of question 2 -->
			
			
			<!-- Start of question 3 -->
            <LI>
            <div class="question-wrapper">
            <div class="question-content">
              <!-- Put the question here -->
              <p>Which, if any, of the following statements are not true? Why?</p>

              <ol type="A">

                <li>A class must provide at least one constructor.</li>

                <li>A default constructor is a constructor with no formal parameters in its parameter list.</li>

                <li>If there are no meaningful default values for a class, the class should not provide a default constructor.</li>

                <li>We can have more than one constructor in a class, as long as each has a different list of arguments.</li>

              </ol>
            </div>
        
            <div class="toggle-solution">Solution</div>
            <div class="solution-content">
              <!-- Put the solution here -->
              <b>A, B and C are not true.</b> A is not true; even if no constructor of any kinds are
	      provided, the compiler still will give you a default constructor.  B is not true (this
	      is a tricky question); e.g., Word( ){ frequency = 0; str = 0; } is still a default
	      constructor though its parameter list consists of 2 variables because it may be called
	      with no arguments due to the use of defaults values for both formal parameters.  C is
	      not true, constructor may assign default values to object, indicating that the object
	      has invalid initial values.
            </div>              
            </div>
            <hr />
            </LI>
            <!-- End of question 3-->
			
			
						<!-- Start of question 4-->
            <LI>
            <div class="question-wrapper">
            <div class="question-content">
              <!-- Put the question here -->
              <p>Which of the following statements is/are incorrect?</p>

              <ol type="A">

                <li>Constructor can be called explicitly.</li>
                <li>Constructor can be called implicitly.</li>
                <li>Destructor is usually called implicitly.</li>
                <li>Constructor and destructor functions are not called at all as they are always inlined.</li>
              </ol>
            </div>
        
            <div class="toggle-solution">Solution</div>
            <div class="solution-content">
              <!-- Put the solution here -->
              <b>D is incorrect.</b> Constructors and destructors can be both inline functions or
	      non-inline functions. 
            </div>              
            </div>
            <hr />
            </LI>
            <!-- End of question 4 -->
			
			
			<!-- Start of question 5-->
            <LI>
            <div class="question-wrapper">
            <div class="question-content">
              <!-- Put the question here -->
	      <p>What is the output of following program?</p>
			  
<pre>#include&lt;iostream&gt;
using namespace std;

class Point
{
    Point() { cout << "Constructor called"; }
};
 
int main()
{
   Point x;
   return 0;
}
</pre>

              <ol type="A">
                <li>Compilation error.</li>
                <li>Runtime error.</li>
                <li>Constructor called.</li>
                <li>None of the above.</li>
              </ol>
            </div>
        
            <div class="toggle-solution">Solution</div>
            <div class="solution-content">
              <!-- Put the solution here -->
              <b>A is correct.</b> By default all members of a class are private. Since no access
            specifier is there for Point( ), it is private and it can't be called outside the class
            when x is constructed in main( ). So the compiler will issue an error message something
            like "calling a private constructor of class Point".
            </div>              
            </div>
            <hr />
            </LI>
            <!-- End of question 5 -->
					
			
			<!-- Start of question 6-->
            <LI>
            <div class="question-wrapper">
            <div class="question-content">
              <!-- Put the question here -->
              <p>What is the output of following program?</p>
			  
<pre>#include&lt;iostream&gt;
using namespace std;

class X 
{
  public:
    int x;
};
 
int main()
{
    X a = { 10 };
    X b = a;
    cout << a.x << " " << b.x;
    return 0;
}
</pre>

              <ol type="A">
                <li>Compilation error</li>

                <li>10 followed by Garbage Value</li>

                <li>10 10</li>

                <li>10 0</li>

              </ol>
            </div>
        
            <div class="toggle-solution">Solution</div>
            <div class="solution-content">
              <!-- Put the solution here -->
              <b>C is correct.</b> The following: "X a = {10};" may look like an error, but it works
	      fine. Like structures, class objects with only public data members can be initialized
	      using the { } syntax. The line "X b = a;" calls the copy constructor and is same as "X
	      b(a);". Please note that, if we don't write our own copy constructor, then compiler
	      creates a default copy constructor which does the default memberwise assignment.
            </div>              
            </div>
            <hr />
            </LI>
            <!-- End of question 6 -->
			
			
				<!-- Start of question 7-->
            <LI>
            <div class="question-wrapper">
            <div class="question-content">
              <!-- Put the question here -->
	      <p>What is the output of following program?</p>
			  
<pre>#include&lt;iostream&gt;
using namespace std;

class Test
{
  public:
      Test() { cout << "Hello from Test() "; }
} a;
 
int main()
{
    cout << "Main Started ";
    return 0;
}
</pre>

              <ol type="A">

                <li>Main Started</li>
                <li>Main Started Hello from Test()</li>
                <li>Hello from Test() Main Started</li>
                <li>Compilation error: Global objects are not allowed</li>

              </ol>
            </div>
        
            <div class="toggle-solution">Solution</div>
            <div class="solution-content">
              <!-- Put the solution here -->
              <b>C is correct.</b> There is a global object <b>a</b> which is constructed before the
            main functions starts. So the constructor for <b>a</b> is called first, then main( ) execution begins.
            </div>              
            </div>
            <hr />
            </LI>
            <!-- End of question 7 -->
			
			
				<!-- Start of question 8-->
            <LI>
            <div class="question-wrapper">
            <div class="question-content">
              <!-- Put the question here -->
	      <p>What is the output of following program?</p>
			  
<pre>#include&lt;iostream&gt;
using namespace std;

class Point
{
    int x;
  public:
    Point(int x) { this->x = x; }
    Point(const Point p) { x = p.x;}
    int getX() { return x; }
};
 
int main()
{
   Point p1(10);
   Point p2 = p1;
   cout << p2.getX();
   return 0;
}
</pre>

              <ol type="A">

                <li>10</li>
                <li>Compilation error: p must be passed by reference</li>
                <li>Garbage value</li>
                <li>None of the above</li>

              </ol>
            </div>
        
            <div class="toggle-solution">Solution</div>
            <div class="solution-content">
              <!-- Put the solution here -->
              <b>B is correct.</b> Objects must be passed by reference in copy
	      constructors. i.e. Copy constructor of class X must have the following signature:
	      X::X(const X& copiee). It cannot be X::X(const X copiee) otherwise it requires copiee to
	      be passed by value to the copy constructor, which in turn will ask for a copy
	      constructor to make the copy, ... resulting in an infinite recursion!
            </div>              
            </div>
            <hr />
            </LI>
            <!-- End of question 8 -->
			
			
		    <!-- Start of question 9-->
            <LI>
            <div class="question-wrapper">
            <div class="question-content">
              <!-- Put the question here -->
	      <p>What is the output of following program?</p>
			  
<pre>#include&lt;iostream&gt;
using namespace std;

class Test
{
  private:
    int x;
  public:
    Test(int i)
    {
        x = i;
        cout << "conversion ";
    }
};
 
int main()
{
    Test t(20);
    t = 30;
    return 0;
}

</pre>

              <ol type="A">

                <li>Compilation error</li>
                <li>conversion conversion</li>
                <li>conversion</li>
                <li>None of the above</li>

              </ol>
            </div>
        
            <div class="toggle-solution">Solution</div>
            <div class="solution-content">
              <!-- Put the solution here -->
              <b>B is correct.</b> If a class has a constructor which can be called with a single
	      argument, then the constructor is a conversion constructor because it allows automatic
	      conversion of the argument object to the class' object. A conversion constructor can be
	      called anywhere when the type of the single argument is assigned to the object.
	      In the above code, at the line "t = 30", 30 is converted automatically to a Test
	      object and default assignment is then performed to assign 30 to t.
            </div>              
            </div>
            <hr />
            </LI>
            <!-- End of question 9 -->

			
			
		    <!-- Start of question 10-->
            <LI>
            <div class="question-wrapper">
            <div class="question-content">
              <!-- Put the question here -->
	      <p>What is the output of following program?</p>
			  
<pre>#include&lt;iostream&gt;
using namespace std;

int i;
  
class A
{
  public:
    ~A() { i = 10; }
};
  
int foo()
{
    i = 3;
    A x;
    return i;
}
  
int main()
{
    cout << foo() << endl;
    return 0;
}
</pre>

              <ol type="A">

                <li>0</li>
                <li>3</li>
                <li>10</li>
                <li>None of the above</li>

              </ol>
            </div>
        
            <div class="toggle-solution">Solution</div>
            <div class="solution-content">
              <!-- Put the solution here -->
              <b>B is correct.</b> While returning from a function, destructors are the last methods
	      to be executed. The destructor for the object "x" is called after the value of i is
            copied to the return value of the function. So, before destructor could change the value
            of i to 10, the current value of i gets copied to the main( ) function already.
            </div>              
            </div>
            <hr />
            </LI>
            <!-- End of question 10 -->
					

          </OL>
        </div>

        <!-- wrap ends here; don't delete this /div --> 
        </div>

</div>
</div>

</body>
</html>

