<!DOCTYPE html>

<html>
<head>
  <title>gem.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>gem.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-1">&#x00a7;</a>
              </div>
              <p>This function defines the Gem module.</p>
<ul>
<li><code>ctx</code> - A canvas context for drawing</li>
<li><code>x</code> - The initial x position of the gem</li>
<li><code>y</code> - The initial y position of the gem</li>
<li><code>color</code> - The colour of the gem</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">const</span> <span class="hljs-title class_">Gem</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">ctx, x, y, color</span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-2">&#x00a7;</a>
              </div>
              <p>This is the sprite sequences of the gem of four colours
<code>green</code>, <code>red</code>, <code>yellow</code> and <code>purple</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">const</span> sequences = {
        <span class="hljs-attr">green</span>:  { <span class="hljs-attr">x</span>: <span class="hljs-number">192</span>, <span class="hljs-attr">y</span>:  <span class="hljs-number">0</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">16</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">16</span>, <span class="hljs-attr">count</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">timing</span>: <span class="hljs-number">200</span>, <span class="hljs-attr">loop</span>: <span class="hljs-literal">true</span> },
        <span class="hljs-attr">red</span>:    { <span class="hljs-attr">x</span>: <span class="hljs-number">192</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">16</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">16</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">16</span>, <span class="hljs-attr">count</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">timing</span>: <span class="hljs-number">200</span>, <span class="hljs-attr">loop</span>: <span class="hljs-literal">true</span> },
        <span class="hljs-attr">yellow</span>: { <span class="hljs-attr">x</span>: <span class="hljs-number">192</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">32</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">16</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">16</span>, <span class="hljs-attr">count</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">timing</span>: <span class="hljs-number">200</span>, <span class="hljs-attr">loop</span>: <span class="hljs-literal">true</span> },
        <span class="hljs-attr">purple</span>: { <span class="hljs-attr">x</span>: <span class="hljs-number">192</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">48</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">16</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">16</span>, <span class="hljs-attr">count</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">timing</span>: <span class="hljs-number">200</span>, <span class="hljs-attr">loop</span>: <span class="hljs-literal">true</span> }
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-3">&#x00a7;</a>
              </div>
              <p>This is the sprite object of the gem created from the Sprite module.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">const</span> sprite = <span class="hljs-title class_">Sprite</span>(ctx, x, y);</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-4">&#x00a7;</a>
              </div>
              <p>The sprite object is configured for the gem sprite here.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    sprite.<span class="hljs-title function_">setSequence</span>(sequences[color])
          .<span class="hljs-title function_">setScale</span>(<span class="hljs-number">2</span>)
          .<span class="hljs-title function_">setShadowScale</span>({ <span class="hljs-attr">x</span>: <span class="hljs-number">0.75</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0.2</span> })
          .<span class="hljs-title function_">useSheet</span>(<span class="hljs-string">&quot;object_sprites.png&quot;</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-5">&#x00a7;</a>
              </div>
              <p>This is the birth time of the gem for finding its age.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">let</span> birthTime = performance.<span class="hljs-title function_">now</span>();</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-6">&#x00a7;</a>
              </div>
              <p>This function sets the color of the gem.</p>
<ul>
<li><code>color</code> - The colour of the gem which can be
<code>&quot;green&quot;</code>, <code>&quot;red&quot;</code>, <code>&quot;yellow&quot;</code> or <code>&quot;purple&quot;</code></li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">const</span> setColor = <span class="hljs-keyword">function</span>(<span class="hljs-params">color</span>) {
        sprite.<span class="hljs-title function_">setSequence</span>(sequences[color]);
        birthTime = performance.<span class="hljs-title function_">now</span>();
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-7">&#x00a7;</a>
              </div>
              <p>This function gets the age (in millisecond) of the gem.</p>
<ul>
<li><code>now</code> - The current timestamp</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">const</span> getAge = <span class="hljs-keyword">function</span>(<span class="hljs-params">now</span>) {
        <span class="hljs-keyword">return</span> now - birthTime;
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-8">&#x00a7;</a>
              </div>
              <p>This function randomizes the gem colour and position.</p>
<ul>
<li><code>area</code> - The area that the gem should be located in.</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">const</span> randomize = <span class="hljs-keyword">function</span>(<span class="hljs-params">area</span>) {
        <span class="hljs-comment">/* Randomize the color */</span>
        <span class="hljs-keyword">const</span> colors = [<span class="hljs-string">&quot;green&quot;</span>, <span class="hljs-string">&quot;red&quot;</span>, <span class="hljs-string">&quot;yellow&quot;</span>, <span class="hljs-string">&quot;purple&quot;</span>];
        <span class="hljs-title function_">setColor</span>(colors[<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">4</span>)]);

        <span class="hljs-comment">/* Randomize the position */</span>
        <span class="hljs-keyword">const</span> {x, y} = area.<span class="hljs-title function_">randomPoint</span>();
        sprite.<span class="hljs-title function_">setXY</span>(x, y);
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-9">&#x00a7;</a>
              </div>
              <p>The methods are returned as an object here.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">getXY</span>: sprite.<span class="hljs-property">getXY</span>,
        <span class="hljs-attr">setXY</span>: sprite.<span class="hljs-property">setXY</span>,
        <span class="hljs-attr">setColor</span>: setColor,
        <span class="hljs-attr">getAge</span>: getAge,
        <span class="hljs-attr">getBoundingBox</span>: sprite.<span class="hljs-property">getBoundingBox</span>,
        <span class="hljs-attr">randomize</span>: randomize,
        <span class="hljs-attr">draw</span>: sprite.<span class="hljs-property">draw</span>,
        <span class="hljs-attr">update</span>: sprite.<span class="hljs-property">update</span>
    };
};</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
