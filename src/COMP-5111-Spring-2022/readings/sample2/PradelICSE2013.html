<html><head><title>Pradel@ICSE2013</title><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">.lst-kix_uvk9fw64dtom-1>li:before{content:"\0025cb  "}ul.lst-kix_otynzmlc5j0o-0{list-style-type:none}.lst-kix_4h6sjpz1y5ej-8>li:before{content:"\0025a0  "}ul.lst-kix_otynzmlc5j0o-1{list-style-type:none}ul.lst-kix_otynzmlc5j0o-2{list-style-type:none}ul.lst-kix_otynzmlc5j0o-3{list-style-type:none}ul.lst-kix_otynzmlc5j0o-4{list-style-type:none}.lst-kix_4h6sjpz1y5ej-2>li:before{content:"\0025a0  "}ul.lst-kix_otynzmlc5j0o-5{list-style-type:none}ul.lst-kix_otynzmlc5j0o-6{list-style-type:none}ul.lst-kix_otynzmlc5j0o-7{list-style-type:none}ul.lst-kix_otynzmlc5j0o-8{list-style-type:none}.lst-kix_twsl7hliraaz-0>li:before{content:"\0025cf  "}.lst-kix_4h6sjpz1y5ej-5>li:before{content:"\0025a0  "}.lst-kix_twsl7hliraaz-4>li:before{content:"\0025cb  "}.lst-kix_uu4x87iah1ox-2>li:before{content:"\0025a0  "}.lst-kix_otynzmlc5j0o-4>li:before{content:"\0025cb  "}.lst-kix_4h6sjpz1y5ej-1>li:before{content:"\0025cb  "}.lst-kix_4h6sjpz1y5ej-7>li:before{content:"\0025cb  "}.lst-kix_uu4x87iah1ox-1>li:before{content:"\0025cb  "}.lst-kix_twsl7hliraaz-5>li:before{content:"\0025a0  "}.lst-kix_twsl7hliraaz-8>li:before{content:"\0025a0  "}.lst-kix_4h6sjpz1y5ej-0>li:before{content:"\0025cf  "}.lst-kix_ewcvqkg3rkj2-1>li:before{content:"\0025cb  "}.lst-kix_twsl7hliraaz-2>li:before{content:"\0025a0  "}.lst-kix_4h6sjpz1y5ej-4>li:before{content:"\0025cb  "}ul.lst-kix_ewcvqkg3rkj2-0{list-style-type:none}ul.lst-kix_ewcvqkg3rkj2-4{list-style-type:none}ul.lst-kix_ewcvqkg3rkj2-3{list-style-type:none}.lst-kix_ewcvqkg3rkj2-3>li:before{content:"\0025cf  "}ul.lst-kix_ewcvqkg3rkj2-2{list-style-type:none}ul.lst-kix_ewcvqkg3rkj2-1{list-style-type:none}.lst-kix_4h6sjpz1y5ej-6>li:before{content:"\0025cf  "}ul.lst-kix_ewcvqkg3rkj2-7{list-style-type:none}ul.lst-kix_ewcvqkg3rkj2-8{list-style-type:none}.lst-kix_ewcvqkg3rkj2-7>li:before{content:"\0025cb  "}ul.lst-kix_ewcvqkg3rkj2-5{list-style-type:none}ul.lst-kix_ewcvqkg3rkj2-6{list-style-type:none}.lst-kix_otynzmlc5j0o-1>li:before{content:"\0025cb  "}.lst-kix_uu4x87iah1ox-5>li:before{content:"\0025a0  "}.lst-kix_otynzmlc5j0o-5>li:before{content:"\0025a0  "}.lst-kix_twsl7hliraaz-6>li:before{content:"\0025cf  "}.lst-kix_uvk9fw64dtom-0>li:before{content:"\0025cf  "}ul.lst-kix_uvk9fw64dtom-6{list-style-type:none}ul.lst-kix_4h6sjpz1y5ej-1{list-style-type:none}ul.lst-kix_uvk9fw64dtom-5{list-style-type:none}ul.lst-kix_4h6sjpz1y5ej-0{list-style-type:none}ul.lst-kix_uvk9fw64dtom-8{list-style-type:none}ul.lst-kix_uvk9fw64dtom-7{list-style-type:none}.lst-kix_uu4x87iah1ox-6>li:before{content:"\0025cf  "}.lst-kix_otynzmlc5j0o-3>li:before{content:"\0025cf  "}ul.lst-kix_4h6sjpz1y5ej-8{list-style-type:none}ul.lst-kix_4h6sjpz1y5ej-6{list-style-type:none}ul.lst-kix_4h6sjpz1y5ej-7{list-style-type:none}ul.lst-kix_uvk9fw64dtom-0{list-style-type:none}ul.lst-kix_4h6sjpz1y5ej-4{list-style-type:none}ul.lst-kix_uvk9fw64dtom-1{list-style-type:none}ul.lst-kix_4h6sjpz1y5ej-5{list-style-type:none}.lst-kix_ewcvqkg3rkj2-0>li:before{content:"\0025cf  "}ul.lst-kix_uvk9fw64dtom-2{list-style-type:none}ul.lst-kix_uvk9fw64dtom-3{list-style-type:none}ul.lst-kix_4h6sjpz1y5ej-2{list-style-type:none}ul.lst-kix_uvk9fw64dtom-4{list-style-type:none}ul.lst-kix_4h6sjpz1y5ej-3{list-style-type:none}.lst-kix_uvk9fw64dtom-8>li:before{content:"\0025a0  "}.lst-kix_ewcvqkg3rkj2-4>li:before{content:"\0025cb  "}.lst-kix_twsl7hliraaz-7>li:before{content:"\0025cb  "}.lst-kix_4h6sjpz1y5ej-3>li:before{content:"\0025cf  "}.lst-kix_otynzmlc5j0o-8>li:before{content:"\0025a0  "}ul.lst-kix_uu4x87iah1ox-8{list-style-type:none}.lst-kix_otynzmlc5j0o-0>li:before{content:"\0025cf  "}.lst-kix_otynzmlc5j0o-7>li:before{content:"\0025cb  "}ul.lst-kix_uu4x87iah1ox-4{list-style-type:none}ul.lst-kix_uu4x87iah1ox-5{list-style-type:none}.lst-kix_twsl7hliraaz-1>li:before{content:"\0025cb  "}ul.lst-kix_uu4x87iah1ox-6{list-style-type:none}ul.lst-kix_uu4x87iah1ox-7{list-style-type:none}.lst-kix_otynzmlc5j0o-6>li:before{content:"\0025cf  "}.lst-kix_ewcvqkg3rkj2-8>li:before{content:"\0025a0  "}ul.lst-kix_uu4x87iah1ox-1{list-style-type:none}ul.lst-kix_uu4x87iah1ox-0{list-style-type:none}ul.lst-kix_uu4x87iah1ox-3{list-style-type:none}ul.lst-kix_uu4x87iah1ox-2{list-style-type:none}.lst-kix_uu4x87iah1ox-4>li:before{content:"\0025cb  "}.lst-kix_uu4x87iah1ox-3>li:before{content:"\0025cf  "}.lst-kix_uu4x87iah1ox-8>li:before{content:"\0025a0  "}.lst-kix_uvk9fw64dtom-2>li:before{content:"\0025a0  "}.lst-kix_ewcvqkg3rkj2-6>li:before{content:"\0025cf  "}.lst-kix_ewcvqkg3rkj2-5>li:before{content:"\0025a0  "}.lst-kix_uvk9fw64dtom-5>li:before{content:"\0025a0  "}.lst-kix_uu4x87iah1ox-7>li:before{content:"\0025cb  "}ul.lst-kix_twsl7hliraaz-5{list-style-type:none}ul.lst-kix_twsl7hliraaz-6{list-style-type:none}ul.lst-kix_twsl7hliraaz-3{list-style-type:none}.lst-kix_uvk9fw64dtom-3>li:before{content:"\0025cf  "}ul.lst-kix_twsl7hliraaz-4{list-style-type:none}ul.lst-kix_twsl7hliraaz-1{list-style-type:none}ul.lst-kix_twsl7hliraaz-2{list-style-type:none}.lst-kix_uu4x87iah1ox-0>li:before{content:"\0025cf  "}.lst-kix_ewcvqkg3rkj2-2>li:before{content:"\0025a0  "}ul.lst-kix_twsl7hliraaz-0{list-style-type:none}ul.lst-kix_twsl7hliraaz-7{list-style-type:none}ul.lst-kix_twsl7hliraaz-8{list-style-type:none}.lst-kix_uvk9fw64dtom-7>li:before{content:"\0025cb  "}.lst-kix_twsl7hliraaz-3>li:before{content:"\0025cf  "}.lst-kix_otynzmlc5j0o-2>li:before{content:"\0025a0  "}.lst-kix_uvk9fw64dtom-4>li:before{content:"\0025cb  "}.lst-kix_uvk9fw64dtom-6>li:before{content:"\0025cf  "}ol{margin:0;padding:0}.c17{max-width:468pt;background-color:#ffffff;padding:72pt 72pt 72pt 72pt}.c0{text-align:justify;direction:ltr}.c3{font-size:12pt;font-family:"Times New Roman"}.c11{color:#1155cc;text-decoration:underline}.c2{height:11pt;direction:ltr}.c7{color:inherit;text-decoration:inherit}.c9{margin:0;padding:0}.c1{font-size:14pt;font-family:"Times New Roman"}.c6{padding-left:0pt;margin-left:36pt}.c12{text-decoration:underline}.c13{font-style:italic}.c4{color:#cc0000}.c16{text-align:center}.c10{direction:ltr}.c5{color:#0000ff}.c15{color:#9900ff}.c14{font-family:"Times New Roman"}.c20{color:#980000}.c18{color:#4a86e8}.c8{font-weight:bold}.c19{height:11pt}.title{padding-top:0pt;line-height:1.15;text-align:left;color:#000000;font-size:21pt;font-family:"Trebuchet MS";padding-bottom:0pt}.subtitle{padding-top:0pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:13pt;font-family:"Trebuchet MS";padding-bottom:10pt}li{color:#000000;font-size:11pt;font-family:"Arial"}p{color:#000000;font-size:11pt;margin:0;font-family:"Arial"}h1{padding-top:10pt;line-height:1.15;text-align:left;color:#000000;font-size:16pt;font-family:"Trebuchet MS";padding-bottom:0pt}h2{padding-top:10pt;line-height:1.15;text-align:left;color:#000000;font-size:13pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt}h3{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:12pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt}h4{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:11pt;text-decoration:underline;font-family:"Trebuchet MS";padding-bottom:0pt}h5{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt}h6{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt}</style></head><body class="c17"><p class="c10 c16"><span class="c1">Reading Report on</span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 500.00px; height: 149.00px;"><img alt="" src="images/image02.png" style="width: 500.00px; height: 149.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2"><span class="c1"></span></p><p class="c16 c10"><span class="c3 c8">ICSE2013</span></p><p class="c16 c10"><span class="c1">prepared by Valerio</span></p><p class="c16 c10"><span class="c1">02 May 2013</span></p><p class="c2"><span class="c1"></span></p><p class="c16 c10"><span class="c1">Notes</span></p><p class="c2"><span class="c1"></span></p><p class="c16 c10"><span class="c1">&nbsp;a copy of the paper can be found at</span><span class="c1"><a class="c7" href="http://www.google.com/url?q=http%3A%2F%2Fmp.binaervarianz.de%2Ficse2013.pdf&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNHOJOyCXph4ZtzZGUOri-YkFiT2dw">&nbsp;</a></span><span class="c11 c1"><a class="c7" href="http://www.google.com/url?q=http%3A%2F%2Fmp.binaervarianz.de%2Ficse2013.pdf&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNHOJOyCXph4ZtzZGUOri-YkFiT2dw">http://mp.binaervarianz.de/icse2013.pdf</a></span></p><p class="c16 c10"><span class="c1">analysis results</span><span class="c1"><a class="c7" href="http://www.google.com/url?q=http%3A%2F%2Fmp.binaervarianz.de%2Ficse2013&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNEuDg_zEjgeLG_T-YK6zvOG77O7tw">&nbsp;</a></span><span class="c11 c1"><a class="c7" href="http://www.google.com/url?q=http%3A%2F%2Fmp.binaervarianz.de%2Ficse2013&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNEuDg_zEjgeLG_T-YK6zvOG77O7tw">http://mp.binaervarianz.de/icse2013</a></span></p><p class="c2"><span class="c11 c1"><a class="c7" href="http://www.google.com/url?q=http%3A%2F%2Fmp.binaervarianz.de%2Ficse2013&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNEuDg_zEjgeLG_T-YK6zvOG77O7tw"></a></span></p><p class="c2"><span class="c1 c11"><a class="c7" href="http://www.google.com/url?q=http%3A%2F%2Fmp.binaervarianz.de%2Ficse2013&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNEuDg_zEjgeLG_T-YK6zvOG77O7tw"></a></span></p><p class="c2"><span class="c11 c1"><a class="c7" href="http://www.google.com/url?q=http%3A%2F%2Fmp.binaervarianz.de%2Ficse2013&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNEuDg_zEjgeLG_T-YK6zvOG77O7tw"></a></span></p><p class="c10"><span class="c3 c8">Citation</span></p><p class="c10"><span class="c3">Michael Pradel and Thomas R. Gross Automatic Testing of Sequential and Concurrent Substitutability, International Conference on Software Engineering (ICSE) 2013<br></span></p><p class="c2"><span class="c3"></span></p><p class="c10"><span class="c3 c8">Abstract</span></p><p class="c0"><span class="c3">Languages with inheritance and polymorphism assume that a subclass instance can substitute a superclass instance without causing behavioral differences for clients of the superclass. However, programmers may accidentally create subclasses that are semantically incompatible with their superclasses. Such subclasses &nbsp;lead &nbsp;to &nbsp;bugs, &nbsp;because &nbsp;a &nbsp;programmer &nbsp;may &nbsp;assign &nbsp;a subclass instance to a superclass reference. This paper presents an automatic testing technique to reveal subclasses that cannot safely substitute their superclasses. The key idea is to generate generic tests that analyze the behavior of both the subclass and its superclass. If using the subclass leads to behavior that cannot occur with the superclass, the analysis reports a warning. We &#64257;nd a high percentage of widely used Java classes, including classes from &nbsp;JBoss, &nbsp;Eclipse, &nbsp;and &nbsp;Apache &nbsp;Commons &nbsp;Collections, &nbsp;to &nbsp;be unsafe &nbsp;substitutes &nbsp;for &nbsp;their &nbsp;superclasses: &nbsp;30% &nbsp;of &nbsp;these &nbsp;classes lead to crashes, and even more have other behavioral differences.</span></p><p class="c2"><span class="c3"></span></p><p class="c0"><span class="c3 c12 c8">Key Problem</span></p><p class="c2"><span class="c3 c12 c8"></span></p><p class="c0"><span class="c3 c8">The Substitutability requirement state that :</span></p><p class="c0"><span class="c3 c13">A subclass &nbsp;should behave &nbsp;like &nbsp;the &nbsp;superclass &nbsp;when &nbsp;being &nbsp;used &nbsp;through &nbsp;the superclass type</span></p><p class="c2"><span class="c3 c13"></span></p><p class="c0"><span class="c3">This paper target the problem of detecting unsafe substitutes (Subclasses that do not fulfill this requirement)</span></p><p class="c2"><span class="c3"></span></p><p class="c0"><span class="c3 c8">Input: </span><span class="c3">(Object-Oriented) Classes to be tested ( possibly &nbsp;accompanied &nbsp;by &nbsp;auxiliary &nbsp;classes )</span></p><p class="c0"><span class="c3 c8">Output: </span><span class="c3">Reports of classes that are unsafe substitutes.</span></p><p class="c2"><span class="c3"></span></p><p class="c0"><span class="c12 c14 c8">Why the paper is accepted?</span></p><p class="c2"><span class="c12 c14 c8"></span></p><p class="c0"><span class="c14 c8">Usefulness (to current practices):</span></p><ul class="c9 lst-kix_twsl7hliraaz-0 start"><li class="c0 c6"><span class="c14">The tool presented in this paper can helps programmers to &#64257;nd substitutability problems automatically, without requiring any additional input besides the classes to be tested</span></li></ul><p class="c2"><span class="c14"></span></p><p class="c0"><span class="c14 c8">Novelty/impact:</span></p><ul class="c9 lst-kix_ewcvqkg3rkj2-0 start"><li class="c0 c6"><span class="c14">No practical tools can detect such problems (especially for multi-threaded programs: subclasses of a thread-safe class must be thread-safe as well)</span></li><li class="c0 c6"><span class="c3">The found that the Substitutability problem is quite common and developers really care about it. They reported 10 bugs and 7 of them have been fixed within a day or a week.</span></li></ul><p class="c0"><span class="c3 c5">[Yepang: does this mean that substitutability problems are easy to fix, but not easy to locate automatically? What are the challenges of locating substitutability problems?]</span><span class="c3 c4">&nbsp;[Valerio: they are not necessarily easy to fix. For example, the developers for fixing this substitutability problem </span><span class="c3 c12 c4"><a class="c7" href="https://www.google.com/url?q=https%3A%2F%2Fissues.apache.org%2Fjira%2Fbrowse%2FCOLLECTIONS-394&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNHnBATAkERwIEkvmYSSfKcViYE1rQ">https://issues.apache.org/jira/browse/COLLECTIONS-394</a></span><span class="c3 c4">&nbsp;they eliminated the subclass from the program</span><span class="c3 c4">]</span></p><p class="c2"><span class="c3"></span></p><p class="c0"><span class="c14 c8">Elegance:</span></p><ul class="c9 lst-kix_uvk9fw64dtom-0 start"><li class="c0 c6"><span class="c14">The paper is well written and presented.</span></li></ul><p class="c2"><span class="c14"></span></p><p class="c0"><span class="c3 c12 c8">Summary</span></p><p class="c0"><span class="c3">---------------------------------------------------------------------------------------------------------------------</span></p><p class="c0"><span class="c3">First of all, I will describe an example of an unsafe substitute.</span></p><p class="c2"><span class="c3"></span></p><p class="c10"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 389.00px; height: 86.00px;"><img alt="" src="images/image00.png" style="width: 389.00px; height: 86.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c3">FastTreeMap is a subclass of TreeMap and &nbsp;therefore &nbsp;should &nbsp;behave &nbsp;like &nbsp;a &nbsp;TreeMap &nbsp;when &nbsp;being referred to as a TreeMap. Executing the code snippet succeeds if m is a TreeMap</span></p><p class="c0"><span class="c3">but it raises an exception if the object m is a FastTreeMap. As a result, FastTreeMap is an unsafe substitute.</span></p><p class="c2"><span class="c3"></span></p><p class="c0"><span class="c3">The Bug report (submitted by the authors of the papers) of this issue is</span></p><p class="c0"><span class="c3 c11"><a class="c7" href="https://www.google.com/url?q=https%3A%2F%2Fissues.apache.org%2Fjira%2Fbrowse%2FCOLLECTIONS-394&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNHnBATAkERwIEkvmYSSfKcViYE1rQ">https://issues.apache.org/jira/browse/COLLECTIONS-394</a></span></p><p class="c2"><span></span></p><p class="c10"><span>[</span><span class="c5">Rongxin: It seems that one of the author report this bug, but the resolution of this bug is &ldquo;won&rsquo;t fix&rdquo;. This evidence seems a little weird.</span><span>]</span></p><p class="c2"><span class="c3 c11"><a class="c7" href="https://www.google.com/url?q=https%3A%2F%2Fissues.apache.org%2Fjira%2Fbrowse%2FCOLLECTIONS-394&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNHnBATAkERwIEkvmYSSfKcViYE1rQ"></a></span></p><p class="c0"><span class="c3">Java enforce substitutability only on the type level. For example, &nbsp;FastTreeMap is a subclass of TreeMap therefore Java checks that the overridden method </span><span class="c3 c13">put</span><span class="c3">&nbsp;(in FastTreeMap) accept at least all the parameters of the </span><span class="c3 c13">put</span><span class="c3">&nbsp;method in TreeMap. Obviously, the type checking of Java is not able to check if the overridden method has the same semantic.</span></p><p class="c0 c19"><span class="c3"></span></p><p class="c0"><span class="c3 c5">[Yepang: is it possible to let compilers raise warnings when they find type inconsistency in assignments? By &ldquo;inconsistency&rdquo;, I mean the two objects are not exactly the same type. For example, even if A is a subclass of B, we still say that A and B are not type consistent. Then the compilers can raise warnings when they do type checking. Will there be too many warnings?]</span><span class="c3 c4">[Valerio: yes, too many warnings: every substitutability cases ] </span><span class="c3 c5">[Yueqi: In many cases, this &nbsp;is hard to check types statically because dynamic bindings often occur during runtime and reflection APIs are often involved. Also, it is not smart to give warnings by simply looking at possible dynamic target because OO language is designed to allow dynamic binding and polymorphism. ]</span><span class="c3 c4">[Valerio:Indeed]</span></p><p class="c10"><span class="c3">This may be a problem. For example, if a programmer call an API that return an object O of running type FastTreeMap and he/she is not aware of it. The programmer will write the code considering O as a TreeMap. </span><span class="c3 c13">To avoid surprises because of subtype instances hidden by</span></p><p class="c0"><span class="c3 c13">polymorphic &nbsp;references, &nbsp;subclasses &nbsp;should &nbsp;not &nbsp;diverge &nbsp;from the &nbsp;superclass &nbsp;behavior.</span></p><p class="c2"><span class="c3 c13"></span></p><p class="c0"><span class="c3">The </span><span class="c3 c8">key insight of the paper</span><span class="c3">&nbsp;is simple and elegant:</span></p><p class="c2"><span class="c3"></span></p><p class="c0"><span class="c3">Given two classes </span><span class="c3 c13">Super</span><span class="c3">&nbsp;and</span><span class="c3 c13">&nbsp;Sub</span><span class="c3">, the technique </span><span class="c3 c8">generates &nbsp;test &nbsp;cases</span><span class="c3">&nbsp; that &nbsp;can &nbsp;test &nbsp;both &nbsp;</span><span class="c3 c13">Super</span><span class="c3">&nbsp; instances &nbsp;and </span><span class="c3 c13">Sub</span><span class="c3">&nbsp;instances. Then, the analysis </span><span class="c3 c12">uses the behavior of Super as &nbsp;an </span><span class="c3 c12 c8">&nbsp;oracle</span><span class="c3 c12">&nbsp; for &nbsp;Sub </span><span class="c3">&nbsp;and &nbsp;reports &nbsp;a &nbsp;warning &nbsp;if &nbsp;Sub &nbsp;behaves differently &nbsp;from &nbsp;its &nbsp;superclass. &nbsp;</span><span class="c3 c5">[Yueqi: How to define &ldquo;difference&rdquo;? For example, we have two subclass of data base. One is for mysql and another is for distributed mysql.. They may just return different result upon the same invocation. Is this considered a difference? If so, it is very likely that this is not a bug. Another example, in my symbolic analysis engine. All load instructions inherits an load instruction class. However, upon invocation, different instructions indeed behavior differently (return different values and perform different heap modification.). However, this should not be considered as bug! ]</span></p><p class="c0"><span class="c3 c5">[Yepang: I believe the idea is quite effective.]</span></p><p class="c2"><span class="c3"></span></p><p class="c0"><span class="c3">-------------------------------------------------------------------------------------------------------------------</span></p><p class="c0"><span class="c3">The</span><span class="c3 c8">&nbsp;test case generation phase </span><span class="c3">is adapted from their previous work:</span><span class="c3 c8">&nbsp; </span><span class="c3 c13">Fully Automatic and Precise Detection of Thread Safety Violations PLDI 2012</span><span class="c3">. This test cases are generating by concatenating methods calls and fields accesses. Please refer to the PLDI if you are interested of the details of the test generation phase. &nbsp;</span></p><p class="c2"><span class="c3"></span></p><p class="c0"><span class="c3">The test cases must be </span><span class="c3 c8">Generic, </span><span class="c3 c13">&nbsp;</span><span class="c3">in the sense that they &nbsp;can &nbsp;test &nbsp;the &nbsp;behavior &nbsp;of &nbsp;the Sub &nbsp;class as &nbsp;well &nbsp;as &nbsp;the &nbsp;behavior of &nbsp;the Super class. &nbsp;Generic &nbsp;tests &nbsp;simulate &nbsp;how &nbsp;clients &nbsp;of &nbsp;Sub &nbsp;and Super use these classes, that is, they represent generic usages. The technique generates both sequential and concurrent tests (executed by two concurrent threads).</span></p><p class="c0"><span class="c3">---------------------------------------------------------------------------------------------------------------------</span></p><p class="c0"><span class="c3">The</span><span class="c3 c8">&nbsp;supercalss oracle generation phase </span><span class="c3">&nbsp;test &nbsp;whether &nbsp;the execution of one previously generated test &nbsp;exposes &nbsp;behavior &nbsp;that &nbsp;occurs when &nbsp;using &nbsp;Sub &nbsp;but &nbsp;that &nbsp;cannot &nbsp;occur &nbsp;when &nbsp;using &nbsp;Super. Each warning &nbsp;comes &nbsp;with &nbsp;a &nbsp;concrete &nbsp;test &nbsp;case &nbsp;showing &nbsp;how &nbsp;the subclass behavior diverges from the superclass behavior.</span></p><p class="c2"><span class="c3"></span></p><p class="c0"><span class="c3">There are two variants of the oracle</span></p><ul class="c9 lst-kix_4h6sjpz1y5ej-0 start"><li class="c0 c6"><span class="c3">Output-diverging substitutes ( difference in &nbsp;the &nbsp;visible &nbsp;output)</span></li></ul><ul class="c9 lst-kix_otynzmlc5j0o-0 start"><li class="c0 c6"><span class="c3">Crashing substitutes. (a crash happens only when testing a Sub class)</span></li></ul><p class="c2"><span class="c3"></span></p><p class="c0"><span class="c3">A </span><span class="c3 c8">crash</span><span class="c3">&nbsp;is considered either a deadlock or an exception. Obviously, an exception could be raised intentionally. if Sub raises an exception, it might not be a substitutability problem. However, if the Super class will not raises the same exception with the same test case we have a divergence in behaviour.</span></p><p class="c2"><span class="c3"></span></p><p class="c0"><span class="c3">For the </span><span class="c3 c8">supercalss oracle in concurrent programs </span><span class="c3">it is required to check all possible interleavings. Otherwise the oracle might report false positives: they detect a divergence in behavior between Sub and Super because they did not cover a specific interleaving of events in Super. To resolve this issue the used Java Path Finder for systematically explore all possible interleavings.</span></p><p class="c2"><span class="c3"></span></p><p class="c0"><span class="c3 c8 c12">Problem &amp; Idea research patterns</span></p><p class="c0"><span class="c3">They adapted their previous work (PLDI2012) for detecting other types of bugs.</span></p><p class="c2"><span class="c3"></span></p><p class="c0"><span class="c3 c12 c8">Evaluation</span></p><p class="c2"><span class="c3 c12 c8"></span></p><p class="c0"><span class="c3">subject: 4 well maintained libraries</span></p><p class="c0"><span class="c3">tool used: the tool presented in their PLDI2012 paper and JPF</span></p><p class="c2"><span class="c3"></span></p><p class="c0"><span class="c3 c8">Results</span></p><p class="c2"><span class="c3 c8"></span></p><p class="c0"><span class="c3">&bull; &nbsp;Many classes are crashing substitutes (43/145=30%). All these unsafeties correspond to bugs that should be &#64257;xed, because &nbsp;they &nbsp;may &nbsp;cause &nbsp;exceptions &nbsp;and &nbsp;deadlocks &nbsp;in clients.</span></p><p class="c2"><span class="c3"></span></p><p class="c0"><span class="c3">&bull; &nbsp; Even &nbsp; more &nbsp; classes &nbsp; are &nbsp; output-diverging &nbsp; substitutes (61/145=42%). &nbsp;We &nbsp;classify &nbsp;most &nbsp;of &nbsp;them &nbsp;(57/61) &nbsp;as false positives.</span></p><p class="c0"><span class="c3 c5">[Yepang: why they are false positives? Could you elaborate a little bit during presentation? To me, if the outputs are not the same, then the subclass must have different semantics with the super class.]</span></p><p class="c2"><span class="c3"></span></p><p class="c0"><span class="c3">&bull; &nbsp; Developers care about crashing substitutes. At least ten bugs found by the analysis have been &#64257;xed by now.</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 611.00px; height: 220.00px;"><img alt="" src="images/image01.png" style="width: 611.00px; height: 220.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2"><span class="c3"></span></p><p class="c0"><span class="c3 c12 c8">Limitation</span></p><p class="c2"><span class="c3 c12 c8"></span></p><p class="c0"><span class="c3 c8">Applicability</span></p><p class="c0"><span class="c3">This approach is only applicable to detect substitutability problems in Libraries code.</span></p><p class="c2"><span class="c3"></span></p><p class="c0"><span class="c3">Firstly, &nbsp;the test cases generated are randomly obtained and may not express any meaningful operations. Why programmers should fix &nbsp;the substitutability problem reported if it can be manifested only by a sequence of actions that not make any sense? &nbsp;In other words, no programmers that are working in the project will ever use the class in that way, the test cases does not represent a rational test case. &nbsp;On the other hand, libraries classes must be secure because they have to ensure a correct behaviour &nbsp;for all &nbsp;possible clients usages.</span></p><p class="c2"><span class="c3"></span></p><p class="c0"><span class="c3">Secondly, a programmer that is working in a project should be aware of the existence and behaviour of subclasses. The problem of course is when he is using external libraries. In conclusion, this tool is only applicable to find substitutability errors in libraries code.</span></p><p class="c0 c19"><span class="c3"></span></p><p class="c0"><span class="c3 c5">[Yepang: why only applicable to libraries? I am very interested to know the explanations. We can discuss during your presentation.]</span><span class="c3 c4">[Valerio: In a later comment I explained better this point]</span></p><p class="c2"><span class="c3"></span></p><p class="c0"><span class="c3 c8">Scalability</span></p><p class="c0"><span class="c3">Since they need to test all possible interleaving their technique suffer from the interleaving explosion problem. Thus, they limited the size and the number of test cases that can be tested.</span></p><p class="c2"><span class="c3"></span></p><p class="c10"><span class="c3 c15">[Wensheng: This paper and PLDI 2012 paper have the same limitation. Automatic test generation can&rsquo;t guarantee the thread-safety or substitutability. If they don&rsquo;t find any bugs, we can&rsquo;t say that the class is thread-safe or substitutable. So, is there any approach to provide some evidences for thread-safety or substitutability?]</span><span class="c3 c20">[Valerio: Obviously, these techniques are incomplete because they rely on the analysis of test cases executions (dynamic analysis). However, I don&rsquo;t think this is a severe limitation or it can even been considered as one. This is the limitation of dynamic analysis. Incompleteness &nbsp;is the price that is needed to pay for having sound results. For increasing the completeness the technique can generate more test cases and increasing the chance of detecting a problem if it exists. ] </span><span class="c3 c5">[Yepang: I agree with Valerio. Dynamic analysis in most cases are much more precise than static analysis, but completeness is not a guarantee. Personally, I prefer soundness than completeness.]</span><span class="c3 c4">[Valerio: Yes, Wensheng pinpointed a general limitation of dynamic analysis not the limitation of this specific work]</span></p><p class="c2"><span class="c3 c15"></span></p><p class="c0"><span class="c3 c12 c8">Reflection/Conclusions</span></p><p class="c10"><span class="c3">Their methodology &nbsp;presented in their PLDI 2012 paper is very attractive:</span></p><p class="c2"><span class="c3"></span></p><p class="c10"><span class="c3">Automatic test case generation + automatic Oracle generation</span></p><p class="c2"><span class="c3"></span></p><p class="c10"><span class="c3">This approach is fully automatic does not required any test cases , specifications or oracles.</span></p><p class="c10"><span class="c3">In the following table is shown the comparison with this methodology compared with &nbsp;existing bug detectors for concurrency bugs(taken from PLDI2012 paper)</span></p><p class="c2"><span class="c3"></span></p><p class="c10"><span class="c3">.</span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 303.00px; height: 334.00px;"><img alt="" src="images/image03.png" style="width: 303.00px; height: 334.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2"><span class="c3"></span></p><p class="c2"><span class="c3"></span></p><p class="c10"><span class="c3">The input is only a program and in comparison with static approaches (also static checkers does not require any test cases) the automated generated oracle does not report any false positives.</span></p><p class="c2"><span class="c3"></span></p><p class="c10"><span class="c3">In this paper ICSE2013 they only present a possible application of this methodology in detecting a different kind of bug. We might think to other applications.</span></p><p class="c2"><span class="c3"></span></p><p class="c10"><span class="c3">In order to alleviate the limitation that test cases generated are randomly obtained, therefore &nbsp;may or may not express any meaningful usage, I would like to raise a question. &nbsp;Is there any previous works that try to automatically generate test cases by combining together existing (manually written) test cases ?. Combining together things (test cases ) that have rational should increase the chance to obtain something meaningful.</span></p><p class="c2"><span class="c3"></span></p><p class="c10"><span class="c3 c18">[Yueqi: this problem can be greatly alleviated by using system test runs. We can obtain usage of libraries from those systems that are using the libraries. Existing systems already provide some typical usage scenarios. Warnings from these typical scenarios should be more important and prioritized to fix.]</span></p><p class="c10"><span class="c3 c18">&cap;__&cap;</span></p><p class="c2"><span class="c3"></span></p><p class="c10"><span class="c3 c5">[Yepang: Besides this question raised by Valerio, I would also like to know why their generated test cases are not meaningful in some cases?]</span><span class="c3 c4">[Valerio: they randomly combine together function calls with random inputs in a &nbsp;random order. It is very unlikely that it will express a real usage. As a result it can only be applied for testing API that must guarantee robustness for any client usage. Try to imagine if you are implementing a software (which is not an API) in a team. why you should spend time and effort in fixing a bug that occurs for some random usage that neither you or any of your team member will never adopt. ]</span></p><p class="c10"><span class="c3 c5">[Yepang: interesting paper! Idea seems to be simple but very effective.]</span></p><p class="c2"><span class="c3"></span></p><p class="c2"><span class="c3"></span></p><p class="c2"><span></span></p></body></html>