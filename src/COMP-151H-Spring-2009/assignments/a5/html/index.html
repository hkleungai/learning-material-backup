<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>a1: COMP151H Programming Assignment 5, Spring 2009</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li class="current"><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>COMP151H Programming Assignment 5, Spring 2009</h1>
<p>
<b>Author:</b> <a href="http://www.cs.ust.hk/~dekai/">Dekai Wu</a><p>
<b>Date:</b> Due 2009.05.17 at 23:00 by CASS<p>
<b>Download:</b> <a href="../../../assignments/a5.tar.gz">http://www.cs.ust.hk/~dekai/151H/assignments/a5.tar.gz</a><p>
<b>Assignment page:</b> <a href="../../../assignments/a5/html/">http://www.cs.ust.hk/~dekai/151H/assignments/a5/html/</a><p>
<b>Course page:</b> <a href="../../../index.html">http://www.cs.ust.hk/~dekai/151H/</a><p>
<h3>Your assignment</h3>
<p>
In this fifth piece of your programming project, you are assigned to maintain and extend the micro-Scheme language you've built in Assignments <a href="../../../assignments/a1/html/">1</a>, <a href="../../../assignments/a2/html/">2</a>, <a href="../../../assignments/a3/html/">3</a>, and <a href="../../../assignments/a4/html/">4</a>, specifically to provide a bigger micro-Scheme Standard Library of general-purpose library functions for users of your programming language.<p>
Recall that your micro-Scheme interpreter has been Turing-equivalent since Assignment 4. We celebrated by beginning to implement the rest of your micro-Scheme programming language, using only micro-Scheme. We had successfully used C++ to bootstrap your implementation of the micro-Scheme programming language, so that the rest can be done in micro-Scheme itself.<p>
Back in Assignment 4, we got you started by giving you implementations of the micro-Scheme Standard Library function <code>factorial</code> and the binary versions of the <code>&gt;</code>, <code>&lt;=</code>, <code>&gt;=</code>, <code>=</code>, and <code>abs</code> operators. You yourself contributed your own implementation of another Standard Library function, <code>for-each</code>. Purely for fun, some of you also wrote additional Standard Library functions, such as the general <code>map</code> and <code>reduce</code> functions and the <code>list</code> function (which required you to have implemented the optional bonus support for a variable number of formal parameters for <code>lambda</code>).<p>
Now in Assignment 5, in your existing <code>library.scm</code> file you will add implementations of a larger set of extremely useful Standard Library functions: <code>list-tail</code> and <code>list-ref</code>, <code>reverse</code>, <code>equal?</code>, <code>assoc</code>, <code>partition</code>, and <code>list-sort</code>.<p>
<h3>Step 1: Implement <code>list-tail</code> and <code>list-ref</code></h3>
<p>
Your <code>list-tail</code> and <code>list-ref</code> functions should take two operands, where the first operand must be a list, and the second operand must be an int.<p>
<code>(list-tail</code> <em>&lt;list&gt; &lt;k&gt;</em><code>)</code> <code><br>
 (list-ref</code> <em>&lt;list&gt; &lt;k&gt;</em><code>)</code> <p>
It is an error if &lt;<em>list</em>&gt; has fewer than &lt;<em>k</em>&gt; elements.<p>
<code>list-tail</code> should return the sublist of &lt;<em>list</em>&gt; obtained by omitting the first &lt;<em>k</em>&gt; elements.<p>
<code>list-ref</code> should return the kth element of list. (This is the same as the <code>car</code> of <code>(list-tail</code> <em>&lt;list&gt; &lt;k&gt;</em><code>)</code>.)<p>
For example:<p>
<code>&gt; (list-tail '(a b c d e) 2)<br>
 (c d e)<br>
 &gt; (list-ref '(a b c d e) 2)</code><code><br>
 c</code><p>
Notice that <code>list-ref</code> basically gives us an indexing operator (like <code>operator[]</code> in C++).<p>
<h3>Step 2: Implement <code>reverse</code></h3>
<p>
Your <code>reverse</code> function should take one operand, where the operand must be a list. It should return a newly allocated list consisting of the elements of list in reverse order. Note that only the top-level list is to be reversed; as seen in the example below, any nested lists should remain unchanged.<p>
<code>(reverse</code> <em>&lt;list&gt;</em><code>)</code> <p>
For example, from the Scheme R5RS specification:<p>
<code>&gt; (reverse '(a b c))</code><code><br>
 (c b a)<br>
 &gt; (reverse '(a (b c) d (e (f))))<br>
 ((e (f)) d (b c) a)</code><p>
<h3>Step 3: Implement <code>equal?</code></h3>
<p>
Recall that the <code>equal?</code> predicate checks for equality by <em>value</em> and not by reference, and so must do a recursive item-by-item comparison whenever two lists are being compared. Your <code>equal?</code> function should take two operands, where the operands may be of any type. It should return <code>1</code> if both operands have equal element-wise values, and <code>0</code> otherwise.<p>
<code>(equal?</code> <em>&lt;obj1&gt; &lt;obj2&gt;</em><code>)</code> <p>
For example:<p>
<code>&gt; (equal? 'a 'a)<br>
 1<br>
 &gt; (equal? '(a) '(a))<br>
 1<br>
 &gt; (equal? '(a (b) c) '(a (b) c))<br>
 1</code><code><br>
 &gt; (equal? '(a ((b c) d) e) '(a ((b c) d) e))<br>
 1<br>
 &gt; (equal? 2 2)<br>
 1<br>
 &gt; (equal? '(5 a b) (cons 5 '(a b)))<br>
 1<br>
 &gt; (equal? (lambda (x) x) (lambda (y) y))</code><br>
 <em>unspecified</em><p>
You can also consult <a href="http://www.schemers.org/Documents/Standards/R5RS/">Scheme R5RS</a> for details of <code>equal?</code>.<p>
<h3>Step 4: Implement <code>assoc</code></h3>
<p>
The idea of an <em>alist</em> (for ``association list'') is fundamental to Scheme/LISP, and is the simplest possible implementation of a dictionary ADT built out of simple cons lists (c.f. <code>map</code> in C++ STL). An alist must be a list of cons pairs, for instance:<p>
<code>&gt; (define e '((a 1) (b 2) (c 3)))</code><p>
The Standard Library procedure <code>assoc</code> has the following form:<p>
<code>(assoc</code> <em>&lt;obj&gt; &lt;alist&gt;</em><code>)</code><p>
It finds the first pair in &lt;<em>alist</em>&gt; whose car field is &lt;<em>obj</em>&gt;, and returns that pair. If no pair in &lt;<em>alist</em>&gt; has &lt;<em>obj</em>&gt; as its <code>car</code>, then <code>0</code> (not the empty list) is returned.<p>
Note that <code>assoc</code> is required to use <code>equal?</code> to compare &lt;<em>obj</em>&gt; with the items in &lt;<em>alist</em>&gt;.<p>
For example:<p>
<code>&gt; (assoc 'a e)<br>
 (a 1)<br>
 &gt; (assoc 'b e)<br>
 (b 2)<br>
 &gt; (assoc 'd e)<br>
 0<br>
 </code><code>&gt; (assoc (list 'a) '(((a)) ((b)) ((c))))<br>
 ((a))<br>
 &gt; (assoc 5 '((2 3) (5 7) (11 13)))<br>
 (5 7) </code><p>
<h3>Step 5: Implement <code>list-partition</code></h3>
<p>
Your <code>list-partition</code> function should take two operands, where the first operand must be a procedure, and the second operand must be a list:<p>
<code>(list-partition</code> <em>&lt;proc&gt; &lt;list&gt;</em><code>)</code><p>
The &lt;<em>proc</em>&gt; must be a predicate that accepts one argument and return a single value (which is either zero or non-zero, interpreted as a boolean). It should not have any side effects on the &lt;<em>list</em>&gt;.<p>
The <code>list-partition</code> function applies &lt;<em>proc</em>&gt; to each element of &lt;<em>list</em>&gt;, and returns a list containing two values: the first one a list of the elements of list for which &lt;<em>proc</em>&gt; returned a true value (i.e., not <code>0</code>), and the second a list of the elements of list for which &lt;<em>proc</em>&gt; returned <code>0</code>. The elements of the two result lists must be in the same order as they appear in the input list.<p>
For example, assuming you've implemented an <code>even?</code> predicate:<p>
<code>&gt; (partition even? &rsquo;(3 1 4 1 5 9 2 6))<br>
 ((4 2 6) (3 1 1 5 9)) </code><p>
<h3>Step 6: Implement <code>list-sort</code></h3>
<p>
Your <code>list-sort</code> function should take two operands, where the first operand must be a procedure, and the second operand must be a list:<p>
<code>(list-sort</code> <em>&lt;proc&gt; &lt;list&gt;</em><code>)</code><p>
The &lt;<em>proc</em>&gt; must be a function that accepts any two elements of &lt;<em>list</em>&gt;, and should not have any side effects on the &lt;<em>list</em>&gt;. It should return a true value (i.e., not <code>0</code>) when its first argument is strictly less than its second, and <code>0</code> otherwise.<p>
The <code>list-sort</code> function performs a sort of &lt;<em>list</em>&gt; in ascending order according to &lt;<em>proc</em>&gt;, without changing &lt;<em>list</em>&gt; in any way. The <code>list-sort</code> procedure returns a list.<p>
You are required to use the Quicksort algorithm in your implementation of <code>list-sort</code>. Therefore the sorting algorithm performs an expected O(<em>n</em> lg <em>n</em>) calls to &lt;<em>proc</em>&gt; where <em>n</em> is the length of list. Your implementation must guarantee that all arguments passed to &lt;<em>proc</em>&gt; are elements of the list being sorted, but the pairing of arguments and the sequencing of calls to &lt;<em>proc</em>&gt; are not specified and is up to you.<p>
For example:<p>
<code>&gt; (list-sort &lt; &rsquo;(3 5 2 1))<br>
 (1 2 3 5)</code><p>
Hint: take advantage of your <code>list-partition</code> function...<p>
<h3>Optional bonus: First three 100% correct assignments</h3>
<p>
A bonus will be awarded for the first three assignments submitted that are 100% correct. :-)<p>
<h3>Important reminders</h3>
<p>
You must follow the design approach outlined in this document. Do <em>not</em> just implement the required functionality using a different design.<p>
Remember to add <b>all</b> your Scheme library functions to the <code>library.scm</code> file where you should already have the libary functions <code>&gt;</code>, <code>&lt;=</code>, <code>&gt;=</code>, <code>=</code>, <code>abs</code>, <code>factorial</code> and <code>for-each</code>. Make sure your improved version of <code>library.scm</code> is included in your tarball submission.<p>
Again, please feel free to implement any other general-purpose library functions you would like, just for fun. Some suggestions, in case you did not do them yet in Assignment 4: the general <code>map</code> and <code>reduce</code> functions and the <code>list</code> function. Remember that these require you to have implemented the optional bonus support for a variable number of formal parameters for <code>lambda</code>.<p>
For this exercise we are providing you with no new files. Please build on top of your tarball from the previous assignment(s). Unless you are improving or debugging your previous implementation, the only difference from your Assignment 4 tarball will be that your <code>library.scm</code> has been expanded.<p>
Remember we are still focusing on proper use of encapsulation. So you still should <em>not</em> edit the files <code><a class="el" href="c__cons_8h.html">c_cons.h</a></code>, <code><a class="el" href="c__cons_8cpp.html">c_cons.cpp</a></code>, <code><a class="el" href="cons_8hpp.html">cons.hpp</a></code>, or <code><a class="el" href="eval_8hpp.html">eval.hpp</a></code>. Again, the programming assignments are mini-exercises in how multiple programmers are supposed to interact and communicate in the real world; these files are <em>owned</em> and <em>maintained</em> by the other author(s).<p>
Depending on your approach, you may or may not need to change the <code>Makefile</code>. Whether you changed it or not, always make sure you include whatever <code>Makefile</code> is needed to build your program, when you submit assignment. Otherwise, the graders cannot build your program.<p>
You must write the final version of the program on your own. Sophisticated plagiarism detection systems are in operation, and they are pretty good at catching copying! If you worked in study groups, you must also acknowledge your collaborators in the write-up for each problem, whether or not they are classmates. Other cases will be dealt with as plagiarism. Re-read the policy on the course home page, and note the University's tougher policy this year regarding cheating.<p>
<b>Your programming style (how clearly and how well you speak C++ and Scheme) is what will be graded. Correct functioning of your program is necessary but not sufficient!</b> </div>
<hr size="1"><address style="text-align: right;"><small>Generated on Tue Apr 28 17:20:51 2009 for a1 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
